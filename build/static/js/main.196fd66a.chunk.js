(this.webpackJsonpmindless=this.webpackJsonpmindless||[]).push([[0],{135:function(e,t,a){e.exports={table:"Table_table__3359v",parameters:"Table_parameters__36Eb3",table__wrapper:"Table_table__wrapper__3qNQ4"}},270:function(e,t,a){e.exports={header:"Header_header__2ftI2",header__nav:"Header_header__nav__11LGB",header__parts:"Header_header__parts__13Xpa",header__part:"Header_header__part__2LgI8",header__part_logo:"Header_header__part_logo__P-5CM",header__part_searchForm:"Header_header__part_searchForm__19Z-p",header__part_nav:"Header_header__part_nav__29rAM"}},272:function(e,t,a){e.exports={footer:"Footer_footer__6cihT"}},274:function(e,t,a){e.exports={btn:"Button_btn__O42EG"}},275:function(e,t,a){e.exports={input:"SettingsForm_input__3w0hU"}},280:function(e,t,a){e.exports=a(588)},43:function(e,t,a){e.exports={filters:"Filters_filters__MAxSv",filter:"Filters_filter__p35Zx",filter_toEnd:"Filters_filter_toEnd__31X9T",filter__label:"Filters_filter__label__1MUKm",filter__input:"Filters_filter__input__3ZZA-"}},44:function(e,t,a){e.exports={menu:"Menu_menu__3BYBb",menu__item:"Menu_menu__item__3iZbd",menu__link:"Menu_menu__link__3-9DX",active:"Menu_active__1nug2"}},484:function(e,t,a){},485:function(e,t,a){},588:function(e,t,a){"use strict";a.r(t);a(281),a(290);var n=a(0),r=a.n(n),l=a(131),c=a.n(l),i=(a(484),a(485),a(270)),o=a.n(i),s=a(86),u=a(44),m=a.n(u),_=function(e){return r.a.createElement("ul",{className:m.a.menu},r.a.createElement("li",{className:m.a.menu__item},r.a.createElement(s.b,{activeClassName:m.a.active,className:m.a.menu__link,to:"/data"},"Data")),r.a.createElement("li",{className:m.a.menu__item},r.a.createElement(s.b,{activeClassName:m.a.active,className:m.a.menu__link,to:"/settings"},"Settings")),r.a.createElement("li",{className:m.a.menu__item},r.a.createElement(s.b,{activeClassName:m.a.active,className:m.a.menu__link,to:"/changes"},"Changes")))},d=function(e){return r.a.createElement("header",{className:"app__header ".concat(o.a.header)},r.a.createElement("div",{className:"app__width"},r.a.createElement("nav",null,r.a.createElement(_,null))))},f=a(272),p=a.n(f),b=function(e){return r.a.createElement("footer",{className:"app__footer ".concat(p.a.footer)},"2020 test work by Applesinkin")},h=a(63),E=a(79),v=a(80),g=a(84),O=a(81),y=a(85),j=a(37),N=a(60),S=a(135),D=a.n(S),M=function(e){var t=e.data,a=e.headings,n=e.setModalData,l=[];a&&(l=a.map((function(e){return r.a.createElement("th",{key:e},e)})));var c=[];return t&&a&&(c=t.map((function(e){var t=a.map((function(t){if("parameters"===t){return r.a.createElement("td",{key:t},r.a.createElement("div",{className:D.a.parameters,onClick:function(){n(e[t])}},JSON.stringify(e[t])))}return r.a.createElement("td",{key:t},e[t])}));return r.a.createElement("tr",{key:e.request},t)}))),r.a.createElement("div",{className:D.a.table__wrapper},r.a.createElement("table",{className:D.a.table},r.a.createElement("thead",null,r.a.createElement("tr",null,l)),r.a.createElement("tbody",null,c)))},T=a(71),w=a(43),C=a.n(w),k=function(e){var t=e.roles,a=Object(N.a)(e,["roles"]),l=Object(n.useState)(a.currentValue),c=Object(T.a)(l,2),i=c[0],o=c[1];i!==a.currentValue&&o(a.currentValue);var s=t.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}));return r.a.createElement("div",{className:C.a.filter},r.a.createElement("label",{className:C.a.filter__label},"Filter by roles"),r.a.createElement("select",{className:C.a.filter__input,value:i,onChange:function(e){var t=e.target.value;o(t),a.getFilteredResults("filter_by_roles",t)}},r.a.createElement("option",{value:""},"None"),s))},x=function(e){var t=Object(n.useState)(e.currentValue),a=Object(T.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)(0),o=Object(T.a)(i,2),s=o[0],u=o[1];l===e.currentValue||s||c(e.currentValue);return r.a.createElement("div",{className:"".concat(C.a.filter," ").concat(C.a.filter_toEnd)},r.a.createElement("label",{className:C.a.filter__label},"Filter by text"),r.a.createElement("input",{className:C.a.filter__input,onChange:function(t){s&&clearTimeout(s);var a=t.target.value;c(a),u(setTimeout((function(){e.getFilteredResults("filter_by_text",a),u(null)}),500))},name:"filter_by_text",type:"text",value:l}))},F=function(e){var t=e.filtersValues.filter_by_roles,a=e.filtersValues.filter_by_text;return r.a.createElement("nav",{className:C.a.filters,action:""},r.a.createElement(k,{currentValue:t,getFilteredResults:e.getFilteredResults,roles:e.roles}),r.a.createElement(x,{currentValue:a,getFilteredResults:e.getFilteredResults}))},R=a(64),A=a.n(R),V=function(e){return r.a.createElement("div",{className:"".concat(A.a.modal__wrapper," js-modal-close"),onClick:function(t){t.target.className.includes("js-modal-close")&&e.closeModal()}},r.a.createElement("div",{className:A.a.modal},r.a.createElement("div",{className:A.a.modal__contain},r.a.createElement("div",{className:A.a.modal__body},r.a.createElement("div",{className:A.a.modal__header},r.a.createElement("h3",null,e.title),r.a.createElement("div",null,r.a.createElement("button",{className:A.a.modal__closeBtn,onClick:e.closeModal},"[X] Close"))),r.a.createElement("div",{className:A.a.modal__main},e.children)))))},H=a(72),U=a.n(H),B=function e(t){var a,l=t.name,c=void 0===l?null:l,i=t.data,o=void 0===i?null:i,s=(a=o,{}.toString.call(a).slice(8,-1)),u=Object(n.useState)(!0),m=Object(T.a)(u,2),_=m[0],d=m[1],f=_?"opened":"closed",p=function(){d(!_)};if(null===o||"string"===typeof o||"number"===typeof o||"boolean"===typeof o)return r.a.createElement(r.a.Fragment,null,r.a.createElement("dt",{className:U.a[f],onClick:p},c," ",r.a.createElement("small",null,"(",s,")")),r.a.createElement("dd",{className:U.a[f]},""+o));if("object"===typeof o){for(var b=Object.keys(o),h=[],E=0;E<b.length;E++){var v=b[E];h.push(r.a.createElement("dl",{className:U.a.list,key:v},r.a.createElement(e,{name:v,data:o[v]})))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("dt",{className:U.a[f],onClick:p},c," ",r.a.createElement("small",null,"(",s,")")),r.a.createElement("dd",{className:U.a[f]},h))}return""},L=function(e){var t=e.data;return r.a.createElement("div",null,r.a.createElement("dl",{className:U.a.list},r.a.createElement(B,{name:"json",data:t})))},J=a(274),I=a.n(J),P=function(e){var t=e.label,a=void 0===t?"button":t,n=e.onClick,l=Object(N.a)(e,["label","onClick"]);return r.a.createElement("button",{className:I.a.btn,type:l.type,onClick:n},a)},X=function(e){e.setTableData;var t=Object(N.a)(e,["setTableData"]),a=t.fileUrl;return r.a.createElement("div",null,r.a.createElement("h2",null,"Data"),r.a.createElement(F,{getFilteredResults:t.getFilteredResults,filtersValues:t.filtersValues,roles:t.roles}),r.a.createElement(M,{data:t.tableData,setModalData:t.setModalData,headings:t.tableHeadings}),r.a.createElement("div",null,r.a.createElement(P,{onClick:function(){t.handleSetTableData(a)},label:t.tableData?"Update CSV":"Download CSV"})),t.isModalActive&&r.a.createElement(V,{title:"Properties",closeModal:t.closeModal},r.a.createElement(L,{data:t.modalData})))},Z=a(34),q=function(e){return fetch(e).then((function(e){return e}))},G=a(278),Q=a(132),W={filterByRole:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!e.length)return e;var a=e.filter((function(e){return e.role===t}));return a},filterByText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return e;var a=e.filter((function(e){for(var a=Object.keys(e),n=0;n<a.length;n++){var r=a[n];if("role"!==r){var l=e[r];if("parameters"===r&&(l=JSON.stringify(l)),l&&l.includes(t))return!0}}return!1}));return a}},$="mindless/search/SET_FILTER",Y="mindless/search/CLEAR_FILTERS",K={results:null,filters:{filter_by_roles:"",filter_by_text:""},textTimer:null},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"mindless/search/SET_SEARCH_RESULTS":return Object(Z.a)({},e,{results:t.data});case $:return Object(Z.a)({},e,{filters:Object(Z.a)({},e.filters,Object(Q.a)({},t.name,t.value))});case Y:return console.log(e.filters),Object(Z.a)({},e,{results:null,filters:Object(Z.a)({},e.filters,{filter_by_roles:"",filter_by_text:""})});default:return e}},ee="mindless/common/SET_DATA",te="mindless/common/SET_CHANGES",ae="mindless/common/SET_ROLES",ne="mindless/common/SHOW_MODAL",re="mindless/common/CLOSE_MODAL",le="mindless/common/SET_FILE_URL",ce={url:"https://mindless-corps.000webhostapp.com/file.csv",data:null,changes:null,headings:null,roles:[],modalData:null,showModal:!1},ie=function(e){return{type:te,data:e}},oe=function(e){return{type:ne,data:e}},se=function(){return{type:re}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(Z.a)({},e,{data:t.data,headings:t.headings});case ae:return Object(Z.a)({},e,{roles:t.roles});case le:return Object(Z.a)({},e,{url:t.fileUrl});case te:return Object(Z.a)({},e,{changes:t.data});case ne:return Object(Z.a)({},e,{modalData:t.data,showModal:!0});case re:return Object(Z.a)({},e,{modalData:null,showModal:!1});default:return e}},me=a(183),_e=function(e){return e.filters.filters},de=function(e){return e.common.url},fe=function(e){return e.common.changes},pe=function(e){return e.common.headings},be=function(e){return e.common.roles},he=function(e){return e.common.showModal},Ee=Object(me.a)((function(e){return e.common.data}),(function(e){return e.filters.results}),(function(e,t){return t||e})),ve=Object(me.a)((function(e){return e.common.modalData}),(function(e){return e})),ge=function(e){function t(e){var a;return Object(E.a)(this,t),(a=Object(g.a)(this,Object(O.a)(t).call(this,e))).handleSetTableData=function(e){a.props.setTableData(e)},a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(X,Object.assign({},this.props,{handleSetTableData:this.handleSetTableData}))}}]),t}(r.a.Component),Oe=Object(j.b)((function(e){return{fileUrl:de(e),tableData:Ee(e),tableHeadings:pe(e),roles:be(e),modalData:ve(e),isModalActive:he(e),filtersValues:_e(e)}}),{setTableData:function(e){return function(t){return q(e).then((function(e){return e.text()})).then((function(e){if(e){var a=function(e){var t=e.split("\r"),a=t[0].split(";"),n=t.slice(1),r={headings:a,data:[]};return r.data=n.map((function(e){var t=e.split(";"),n={};return a.forEach((function(e,a){var r=null;return t[a]&&(r=t[a],"parameters"===e&&(r=(r=(r=r.replace(/""/g,"'")).replace(/"/g,"")).replace(/'/g,'"'),r=JSON.parse(r))),n[e]=r})),n})),r}(e),n=[];a.data.forEach((function(e){e.role&&!n.includes(e.role)&&n.push(e.role)})),t({type:Y}),t(function(e){return function(t){var a=localStorage.getItem("lastTableData");if(!a||"[]"===a)return localStorage.setItem("lastTableData",JSON.stringify(e)),void t(ie(e));var n=JSON.parse(a).map((function(e){return JSON.stringify(e)})),r=e.map((function(e){return JSON.stringify(e)})).filter((function(e){return!n.includes(e)})).map((function(e){return JSON.parse(e)}));localStorage.setItem("lastTableData",JSON.stringify(e)),t(ie(r))}}(a.data)),t(function(e,t){return{type:ee,data:e,headings:t}}(a.data,a.headings)),t(function(e){return{type:ae,roles:e}}(n))}}))}},getFilteredResults:function(e,t){return function(a,n){a(function(e,t){return{type:$,name:e,value:t}}(e,t));var r=n().common.data;if(r){var l=n().filters.filters,c=Object(G.a)(r),i=[];if(l.filter_by_roles){var o=i.length?i[i.length-1]:c,s=W.filterByRole(o,l.filter_by_roles);i.push(s)}if(l.filter_by_text){var u=i.length?i[i.length-1]:c,m=W.filterByText(u,l.filter_by_text);i.push(m)}a(function(e){return{type:"mindless/search/SET_SEARCH_RESULTS",data:e}}(i[i.length-1]))}}},setModalData:oe,closeModal:se})(ge),ye=a(590),je=a(589),Ne=function(e){if(!e)return"This field must be required"},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/gm,a=e.match(t);if(e&&!a)return"Invalid url format"},De=function(e){var t=e.input,a=e.meta,n=a.touched,l=a.error,c=Object(N.a)(e,["input","meta"]);return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,c)),n&&l&&r.a.createElement("span",{className:"error-message"},l))},Me=a(275),Te=a.n(Me),we=Object(je.a)({form:"settings"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement(ye.a,{name:"file_url",component:De,type:"text",className:Te.a.input,validate:[Se,Ne]}),r.a.createElement(P,{label:"Submit Settings",type:"submit"}))})),Ce=function(e){var t={file_url:e.fileUrl};return r.a.createElement("div",null,r.a.createElement("h2",null,"Settings"),r.a.createElement(we,{initialValues:t,onSubmit:e.submitSettings}))},ke=function(e){function t(){var e,a;Object(E.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(g.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(r)))).submitSettings=function(e){e.file_url&&a.props.setFileUrl(e.file_url)},a}return Object(y.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(Ce,{fileUrl:this.props.fileUrl,submitSettings:this.submitSettings})}}]),t}(r.a.Component),xe=Object(j.b)((function(e){return{fileUrl:de(e)}}),{setFileUrl:function(e){return{type:le,fileUrl:e}}})(ke),Fe=function(e){var t="";return e.tableDataChanges?e.tableDataChanges.length||(t="No changes found"):t="You need to download new data first",r.a.createElement("div",null,r.a.createElement("h2",null,"Changes"),t?r.a.createElement("p",null,t):r.a.createElement(M,{data:e.tableDataChanges,headings:e.tableHeadings,setModalData:e.setModalData}),e.isModalActive&&r.a.createElement(V,{title:"Properties",closeModal:e.closeModal},r.a.createElement(L,{data:e.modalData})))},Re=function(e){function t(){return Object(E.a)(this,t),Object(g.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe,this.props)}}]),t}(r.a.Component),Ae=Object(j.b)((function(e){return{tableDataChanges:fe(e),tableHeadings:pe(e),modalData:ve(e),isModalActive:he(e)}}),{setModalData:oe,closeModal:se})(Re);var Ve=function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"app__wrapper"},r.a.createElement(d,null),r.a.createElement("div",{className:"app__main",id:"main-content"},r.a.createElement("div",{className:"app__width"},r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/data",render:function(){return r.a.createElement(Oe,null)}}),r.a.createElement(h.a,{path:"/settings",render:function(){return r.a.createElement(xe,null)}}),r.a.createElement(h.a,{path:"/changes",render:function(){return r.a.createElement(Ae,null)}}),r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(Oe,null)}})))),r.a.createElement(b,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=a(18),Ue=a(591),Be=a(277),Le=Object(He.c)({common:ue,filters:z,form:Ue.a}),Je=Object(He.d)(Le,Object(He.a)(Be.a));c.a.render(r.a.createElement(j.a,{store:Je},r.a.createElement(Ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,t,a){e.exports={modal:"Modal_modal__1aJg3",modal__wrapper:"Modal_modal__wrapper__2eXBS",modal__contain:"Modal_modal__contain__2SaMB",modal__body:"Modal_modal__body__QrL8q",modal__header:"Modal_modal__header__1rHTb",modal__closeBtn:"Modal_modal__closeBtn__21RRA"}},72:function(e,t,a){e.exports={list:"Properties_list__243D0",closed:"Properties_closed__2V-Q_"}}},[[280,1,2]]]);
//# sourceMappingURL=main.196fd66a.chunk.js.map